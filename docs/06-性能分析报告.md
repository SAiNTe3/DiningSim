\# æ€§èƒ½åˆ†ææŠ¥å‘Š



\*\*æ–‡æ¡£ç‰ˆæœ¬\*\*: v1.0  

\*\*åˆ›å»ºæ—¥æœŸ\*\*: 2025-12-26  

\*\*ä½œè€…\*\*: SAiNTe3



---



\## ç›®å½•



\- \[1. æ¦‚è¿°](#1-æ¦‚è¿°)

\- \[2. æµ‹è¯•ç¯å¢ƒ](#2-æµ‹è¯•ç¯å¢ƒ)

\- \[3. æ€§èƒ½æŒ‡æ ‡åˆ†æ](#3-æ€§èƒ½æŒ‡æ ‡åˆ†æ)

\- \[4. ç“¶é¢ˆåˆ†æ](#4-ç“¶é¢ˆåˆ†æ)

\- \[5. ä¼˜åŒ–å»ºè®®](#5-ä¼˜åŒ–å»ºè®®)

\- \[6. å¯¹æ¯”åˆ†æ](#6-å¯¹æ¯”åˆ†æ)



---



\## 1. æ¦‚è¿°



\### 1.1 æŠ¥å‘Šç›®çš„



æœ¬æŠ¥å‘Šæ—¨åœ¨ï¼š

\- âœ… è¯„ä¼°ç³»ç»Ÿåœ¨ä¸åŒè´Ÿè½½ä¸‹çš„æ€§èƒ½è¡¨ç°

\- âœ… è¯†åˆ«æ€§èƒ½ç“¶é¢ˆå’Œä¼˜åŒ–ç©ºé—´

\- âœ… æä¾›æ€§èƒ½ä¼˜åŒ–å»ºè®®

\- âœ… éªŒè¯ç³»ç»Ÿæ»¡è¶³æ€§èƒ½è¦æ±‚



\### 1.2 æ€§èƒ½ç›®æ ‡



| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å®é™…å€¼ | çŠ¶æ€ |

|------|--------|--------|------|

| \*\*ååé‡\*\* | > 3 æ¬¡/ç§’ (10P) | 4.10 æ¬¡/ç§’ | âœ… è¶…å‡º |

| \*\*CPU ä½¿ç”¨ç‡\*\* | < 20% | 12.5% (å¹³å‡) | âœ… è¾¾æ ‡ |

| \*\*å†…å­˜å ç”¨\*\* | < 100 MB | 45.8 MB (å¹³å‡) | âœ… è¾¾æ ‡ |

| \*\*å“åº”å»¶è¿Ÿ\*\* | < 500ms | (æœªæµ‹é‡) | âš ï¸ å¾…è¡¥å…… |

| \*\*æ­»é”ç‡\*\* | 0% | 0% | âœ… è¾¾æ ‡ |

| \*\*é¥¥é¥¿ç‡\*\* | 0% | 0% | âœ… è¾¾æ ‡ |



\### 1.3 æµ‹è¯•æ‘˜è¦



```mermaid

pie title æµ‹è¯•åœºæ™¯åˆ†å¸ƒ

&nbsp;   "å¹¶å‘æµ‹è¯• (6ä¸ª)" : 50

&nbsp;   "å‹åŠ›æµ‹è¯• (1ä¸ª)" : 8

&nbsp;   "è¾¹ç•Œæµ‹è¯• (5ä¸ª)" : 42

```



---



\## 2. æµ‹è¯•ç¯å¢ƒ



\### 2.1 ç¡¬ä»¶é…ç½®



```yaml

æµ‹è¯•æœºå™¨: 

&nbsp; å¤„ç†å™¨: Intel Core i7-10700K @ 3.80GHz (8æ ¸16çº¿ç¨‹)

&nbsp; å†…å­˜: 16 GB DDR4 @ 3200MHz

&nbsp; å­˜å‚¨: Samsung 970 EVO Plus 500GB (NVMe SSD)

&nbsp; æ“ä½œç³»ç»Ÿ: Windows 11 Pro x64 (Build 22000)

```



\### 2.2 è½¯ä»¶ç‰ˆæœ¬



| ç»„ä»¶ | ç‰ˆæœ¬ |

|------|------|

| \*\*Python\*\* | 3.11.5 (64-bit) |

| \*\*Visual Studio\*\* | 2022 (MSVC 19.38) |

| \*\*CMake\*\* | 3.27.1 |

| \*\*PyQt6\*\* | 6.6.0 |

| \*\*psutil\*\* | 5.9.6 |



\### 2.3 ç¼–è¯‘é€‰é¡¹



```cmake

\# CMakeLists.txt

set(CMAKE\_BUILD\_TYPE Release)

set(CMAKE\_CXX\_FLAGS\_RELEASE "/O2 /Ob2 /DNDEBUG")

\# /O2: æœ€å¤§ä¼˜åŒ–

\# /Ob2: å†…è”å±•å¼€

\# /DNDEBUG: ç¦ç”¨è°ƒè¯•ä»£ç 

```



---



\## 3. æ€§èƒ½æŒ‡æ ‡åˆ†æ



\### 3.1 ååé‡åˆ†æ



\#### 3.1.1 ååé‡éšå¹¶å‘åº¦å˜åŒ–



```mermaid

graph LR

&nbsp;   A\[4P+3F:  1.20æ¬¡/ç§’] --> B\[6P+5F: 2.33æ¬¡/ç§’]

&nbsp;   B --> C\[8P+7F: 3.10æ¬¡/ç§’]

&nbsp;   C --> D\[10P+9F: 4.10æ¬¡/ç§’]

&nbsp;   D --> E\[12P+11F: 4.97æ¬¡/ç§’]

&nbsp;   E --> F\[15P+14F: 4.11æ¬¡/ç§’]

&nbsp;   

&nbsp;   style A fill:#ffccbc

&nbsp;   style B fill:#fff9c4

&nbsp;   style C fill:#c8e6c9

&nbsp;   style D fill:#a5d6a7

&nbsp;   style E fill:#81c784

&nbsp;   style F fill:#ffccbc

```



\#### 3.1.2 æ•°æ®è¡¨æ ¼



| å“²å­¦å®¶æ•° | å‰å­æ•° | ååé‡ (æ¬¡/ç§’) | ç›¸å¯¹æå‡ | CPU (%) |

|---------|--------|---------------|---------|---------|

| 4 | 3 | 1.20 | åŸºå‡† | ~5 |

| 5 | 4 | 1.97 | +64% | ~7 |

| 6 | 5 | 2.33 | +94% | ~8 |

| 8 | 7 | 3.10 | +158% | ~10 |

| 10 | 9 | 4.10 | +242% | ~12 |

| 12 | 11 | 4.97 | +314% | ~15 |

| 15 | 14 | 4.11 | +243% | ~13 |



\#### 3.1.3 åˆ†æç»“è®º



\*\*è§‚å¯Ÿ\*\*:

\- âœ… ååé‡éšå¹¶å‘åº¦å¢åŠ å‘ˆ\*\*æ¬¡çº¿æ€§å¢é•¿\*\*

\- âœ… æœ€ä½³æ€§èƒ½ç‚¹ï¼š\*\*12å“²å­¦å®¶ + 11å‰å­\*\* (4.97 æ¬¡/ç§’)

\- âš ï¸ è¶…è¿‡ 12 äººåå‡ºç°æ€§èƒ½ä¸‹é™ï¼ˆé”ç«äº‰åŠ å‰§ï¼‰



\*\*æ•°å­¦æ¨¡å‹\*\*:

```

ååé‡ â‰ˆ 0.4 Ã— å“²å­¦å®¶æ•° (4-12äºº)

é¥±å’Œç‚¹:  ~12-15 äºº

```



---



\### 3.2 CPU ä½¿ç”¨ç‡åˆ†æ



\#### 3.2.1 å‹åŠ›æµ‹è¯• CPU æ—¶é—´åºåˆ—



```

æ—¶é—´(s) | CPUä½¿ç”¨ç‡ | å¯è§†åŒ–

--------|----------|-------------------------------------------

&nbsp;  0    |  5.2%    | â–ˆâ–ˆ

&nbsp; 30    | 12.3%    | â–ˆâ–ˆâ–ˆâ–ˆ

&nbsp; 60    | 11.8%    | â–ˆâ–ˆâ–ˆâ–ˆ

&nbsp; 90    | 13.1%    | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ

&nbsp;120    | 12.0%    | â–ˆâ–ˆâ–ˆâ–ˆ

&nbsp;150    | 12.7%    | â–ˆâ–ˆâ–ˆâ–ˆ

&nbsp;180    | 11.5%    | â–ˆâ–ˆâ–ˆâ–ˆ

&nbsp;210    | 13.4%    | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ

&nbsp;240    | 12.9%    | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ

&nbsp;270    | 12.2%    | â–ˆâ–ˆâ–ˆâ–ˆ

&nbsp;300    | 13.0%    | â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ



å¹³å‡:  12.5%

æ ‡å‡†å·®: 0.8%

å³°å€¼: 15.2%

```



\#### 3.2.2 CPU åˆ†å¸ƒç›´æ–¹å›¾



```

CPUåŒºé—´  | é¢‘ç‡ | å æ¯”

---------|------|------

0-5%     | 12   | 4%

5-10%    | 45   | 15%

10-15%   | 230  | 77%

15-20%   | 13   | 4%

>20%     | 0    | 0%

```



\#### 3.2.3 åˆ†æç»“è®º



\*\*è§‚å¯Ÿ\*\*:

\- âœ… CPU ä½¿ç”¨ç‡ç¨³å®šåœ¨ \*\*10-15%\*\* åŒºé—´

\- âœ… æ— å¼‚å¸¸å³°å€¼ï¼ˆæœ€é«˜ 15.2%ï¼‰

\- âœ… æ ‡å‡†å·®å°ï¼ˆ0.8%ï¼‰ï¼Œæ³¢åŠ¨å¹³ç¨³



\*\*æ•ˆç‡è¯„ä¼°\*\*:

```

ç†è®ºæœ€å¤§ CPU (16çº¿ç¨‹100%): 1600%

å®é™…ä½¿ç”¨ (15çº¿ç¨‹12.5%):    187. 5%

å•çº¿ç¨‹å¹³å‡:                   12.5%

æ•ˆç‡: ä½ CPU å ç”¨ï¼Œé«˜å¹¶å‘æ•ˆç‡ âœ…

```



---



\### 3.3 å†…å­˜å ç”¨åˆ†æ



\#### 3.3.1 å†…å­˜å¢é•¿æ›²çº¿



```

æ—¶é—´(s) | å†…å­˜(MB) | å¢é•¿ç‡

--------|---------|--------

&nbsp;  0    | 30.2    | -

&nbsp; 60    | 42.5    | +40. 7%

&nbsp;120    | 45.1    | +6.1%

&nbsp;180    | 46.3    | +2.7%

&nbsp;240    | 47.8    | +3.2%

&nbsp;300    | 48.2    | +0.8%



åˆå§‹å†…å­˜: 30.2 MB

æœ€ç»ˆå†…å­˜: 48.2 MB

æ€»å¢é•¿: 18.0 MB (+59.6%)

```



\#### 3.3.2 å†…å­˜åˆ†å¸ƒåˆ†æ



```yaml

å†…å­˜å ç”¨åˆ†è§£ (ä¼°ç®—):

&nbsp; Python è§£é‡Šå™¨: ~25 MB

&nbsp; PyQt6 åº“:  ~10 MB

&nbsp; sim\_core. pyd (C++ æ¨¡å—):

&nbsp;   - Simulation å¯¹è±¡: ~2 MB

&nbsp;   - 15 ä¸ªå“²å­¦å®¶çº¿ç¨‹æ ˆ: ~15 MB (1MB Ã— 15)

&nbsp;   - äº‹ä»¶é˜Ÿåˆ—: ~1 MB

&nbsp; æ€»è®¡: ~53 MB (ä¸å®æµ‹ 48.2 MB æ¥è¿‘)

```



\#### 3.3.3 å†…å­˜æ³„æ¼æ£€æµ‹



\*\*æ–¹æ³•\*\*:  è§‚å¯Ÿé•¿æ—¶é—´è¿è¡Œçš„å†…å­˜æ›²çº¿æ–œç‡



```

æ—¶é—´æ®µ      | å¢é•¿é€Ÿç‡

------------|----------

0-60s       | 0.205 MB/s (åˆå§‹åŒ–)

60-120s     | 0.043 MB/s

120-180s    | 0.020 MB/s

180-240s    | 0.025 MB/s

240-300s    | 0.007 MB/s âœ…

```



\*\*ç»“è®º\*\*:

\- âœ… å†…å­˜å¢é•¿ç‡é€’å‡ï¼Œè¶‹äºç¨³å®š

\- âœ… \*\*æ— æ˜æ˜¾å†…å­˜æ³„æ¼\*\*

\- âœ… æœ€ç»ˆå†…å­˜å ç”¨è¿œä½äºç›®æ ‡ï¼ˆ< 100 MBï¼‰



---



\### 3.4 ä¸Šä¸‹æ–‡åˆ‡æ¢åˆ†æ



\#### 3.4.1 ç»Ÿè®¡æ•°æ®



```yaml

æµ‹è¯•åœºæ™¯:  15 å“²å­¦å®¶ Ã— 5 åˆ†é’Ÿ

æ€»ä¸Šä¸‹æ–‡åˆ‡æ¢: 8,234 æ¬¡

&nbsp; - è‡ªæ„¿åˆ‡æ¢: ~6,500 æ¬¡ (79%)

&nbsp; - å¼ºåˆ¶åˆ‡æ¢: ~1,734 æ¬¡ (21%)



å¹³å‡é¢‘ç‡: 27.4 æ¬¡/ç§’

å•çº¿ç¨‹å¹³å‡:  1.8 æ¬¡/ç§’

```



\#### 3.4.2 åˆ‡æ¢åŸå› åˆ†æ



```mermaid

pie title ä¸Šä¸‹æ–‡åˆ‡æ¢åŸå› åˆ†å¸ƒ

&nbsp;   "Sleep ä¸»åŠ¨è®©å‡º" : 60

&nbsp;   "é”ç­‰å¾…é˜»å¡" : 19

&nbsp;   "æ—¶é—´ç‰‡ç”¨å°½" : 15

&nbsp;   "I/O ç­‰å¾…" : 6

```



\#### 3.4.3 åˆ†æç»“è®º



\*\*è§‚å¯Ÿ\*\*:

\- âœ… å¤§éƒ¨åˆ†æ˜¯\*\*è‡ªæ„¿åˆ‡æ¢\*\*ï¼ˆSleep è°ƒç”¨ï¼‰

\- âœ… å¼ºåˆ¶åˆ‡æ¢å æ¯”ä½ï¼ˆ21%ï¼‰ï¼Œè¯´æ˜é”ç«äº‰ä¸ä¸¥é‡

\- âœ… åˆ‡æ¢é¢‘ç‡åˆç†ï¼ˆ27 æ¬¡/ç§’ï¼‰



\*\*å¯¹æ¯”æ ‡å‡†\*\*:

```

ä½é¢‘åˆ‡æ¢: < 10 æ¬¡/ç§’ (è¿‡åº¦ä¸²è¡Œ)

æ­£å¸¸é¢‘ç‡: 10-50 æ¬¡/ç§’ âœ… (æˆ‘ä»¬çš„æƒ…å†µ)

é«˜é¢‘åˆ‡æ¢: > 100 æ¬¡/ç§’ (è¿‡åº¦ç«äº‰)

```



---



\### 3.5 é”ç«äº‰åˆ†æ (ç†è®ºåˆ†æ)



\#### 3.5.1 é”ä½¿ç”¨ç»Ÿè®¡



| é”ç±»å‹ | æ•°é‡ | ç”¨é€” | ç«äº‰ç¨‹åº¦ |

|--------|------|------|---------|

| `state\_mutex` | 1 | ä¿æŠ¤çŠ¶æ€æ•°ç»„ | ä¸­ç­‰ |

| `event\_mutex` | 1 | ä¿æŠ¤äº‹ä»¶é˜Ÿåˆ— | ä½ |

| `Fork:: mtx` | N | ä¿æŠ¤å‰å­èµ„æº | é«˜ |



\#### 3.5.2 é”æŒæœ‰æ—¶é—´åˆ†æ (ä¼°ç®—)



```cpp

// state\_mutex

{

&nbsp;   WinLockGuard lock(state\_mutex);  // æŒæœ‰æ—¶é—´:  ~1-5 Î¼s

&nbsp;   states\[id] = State::EATING;

}



// Fork::mtx

if (fork->mtx.try\_lock()) {          // æŒæœ‰æ—¶é—´: ~500-1000 ms

&nbsp;   // ...  è¿›é¤ ...

&nbsp;   fork->mtx.unlock();

}

```



\*\*çƒ­ç‚¹\*\*:

\- ğŸ”¥ \*\*Fork::mtx\*\* æ˜¯ä¸»è¦ç«äº‰ç‚¹ï¼ˆæŒæœ‰æ—¶é—´é•¿ï¼‰

\- âœ… \*\*state\_mutex\*\* ç«äº‰è½»å¾®ï¼ˆæŒæœ‰æ—¶é—´çŸ­ï¼‰

\- âœ… \*\*event\_mutex\*\* å‡ ä¹æ— ç«äº‰ï¼ˆå•æ¶ˆè´¹è€…ï¼‰



\#### 3.5.3 ä¼˜åŒ–æ•ˆæœè¯„ä¼°



\*\*å½“å‰è®¾è®¡\*\*:

```

é”ç²’åº¦: å‰å­çº§åˆ«ï¼ˆæœ€ç»†ï¼‰âœ…

è·å–ç­–ç•¥: try\_lock() éé˜»å¡ âœ…

å›é€€æœºåˆ¶: è·å–å¤±è´¥ç«‹å³é‡Šæ”¾ âœ…

```



\*\*æ•ˆæœ\*\*:

\- âœ… æœ€å¤§åŒ–å¹¶è¡Œåº¦

\- âœ… é¿å…çº¿ç¨‹é˜»å¡

\- âœ… æ­»é”é£é™©æä½



---



\## 4. ç“¶é¢ˆåˆ†æ



\### 4.1 æ€§èƒ½ç“¶é¢ˆè¯†åˆ«



\#### 4.1.1 Amdahl å®šå¾‹åˆ†æ



```

ä¸²è¡Œéƒ¨åˆ† (S):

&nbsp; - Banker's Algorithm æ£€æŸ¥:  ~5%

&nbsp; - äº‹ä»¶æ—¥å¿—è®°å½•: ~2%

&nbsp; - çŠ¶æ€æ›´æ–°: ~3%

&nbsp; æ€»è®¡: ~10%



å¹¶è¡Œéƒ¨åˆ† (P): ~90%



ç†è®ºåŠ é€Ÿæ¯” (N=15):

&nbsp; Speedup = 1 / (S + P/N)

&nbsp;         = 1 / (0.1 + 0.9/15)

&nbsp;         = 1 / 0.16

&nbsp;         â‰ˆ 6.25x



å®é™…åŠ é€Ÿæ¯”:  4.11 / 1.20 â‰ˆ 3.42x



æ•ˆç‡: 3.42 / 6.25 â‰ˆ 54. 7%

```



\#### 4.1.2 ç“¶é¢ˆæ’åº



| æ’å | ç“¶é¢ˆç‚¹ | å½±å“ç¨‹åº¦ | ä¼˜åŒ–éš¾åº¦ |

|------|--------|---------|---------|

| 1 | ğŸ”¥ \*\*å‰å­é”ç«äº‰\*\* | é«˜ (>12äºº) | ä¸­ |

| 2 | âš ï¸ \*\*Banker's ç®—æ³•\*\* | ä¸­ (O(NÂ²)) | é«˜ |

| 3 | âš ï¸ \*\*äº‹ä»¶é˜Ÿåˆ—å†™å…¥\*\* | ä½ | ä½ |

| 4 | â„¹ï¸ \*\*çŠ¶æ€æ›´æ–°\*\* | ä½ | ä½ |



---



\### 4.2 çƒ­ç‚¹ä»£ç åˆ†æ



\#### 4.2.1 CPU çƒ­ç‚¹ (ç†è®ºåˆ†æ)



```cpp

// çƒ­ç‚¹ 1: philosopher\_thread ä¸»å¾ªç¯ (~70% CPU)

void Simulation::philosopher\_thread(int id) {

&nbsp;   while (running) {  // ğŸ”¥ é«˜é¢‘å¾ªç¯

&nbsp;       // THINKING

&nbsp;       Sleep(thinking\_time);  // ä¸»åŠ¨è®©å‡º

&nbsp;       

&nbsp;       // HUNGRY

&nbsp;       while (! has\_eaten) {

&nbsp;           if (request\_permission(... )) {  // ğŸ”¥ é¢‘ç¹è°ƒç”¨

&nbsp;               if (fork->mtx.try\_lock()) {  // ğŸ”¥ é”æ“ä½œ

&nbsp;                   // ... 

&nbsp;               }

&nbsp;           }

&nbsp;           Sleep(50);  // ğŸ”¥ é«˜é¢‘ Sleep

&nbsp;       }

&nbsp;       

&nbsp;       // EATING

&nbsp;       Sleep(eating\_time);

&nbsp;   }

}



// çƒ­ç‚¹ 2: is\_safe\_state (~15% CPU)

bool Simulation::is\_safe\_state(... ) {

&nbsp;   // O(NÂ²) å¤æ‚åº¦ ğŸ”¥

&nbsp;   for (int i = 0; i < num\_philosophers; ++i) {

&nbsp;       for (int j = 0; j < num\_forks; ++j) {

&nbsp;           // ...

&nbsp;       }

&nbsp;   }

}



// çƒ­ç‚¹ 3: log\_event (~10% CPU)

void Simulation::log\_event(...) {

&nbsp;   WinLockGuard lock(event\_mutex);  // é¢‘ç¹åŠ é”

&nbsp;   event\_queue.push\_back(... );

}

```



\#### 4.2.2 å†…å­˜çƒ­ç‚¹



```cpp

// çƒ­ç‚¹ 1: äº‹ä»¶é˜Ÿåˆ— (é¢‘ç¹åˆ†é…/é‡Šæ”¾)

std::deque<SimEvent> event\_queue;  // åŠ¨æ€å¢é•¿



// çƒ­ç‚¹ 2: ä¸´æ—¶å¯¹è±¡

std::vector<int> get\_states() {

&nbsp;   std::vector<int> result;  // æ¯æ¬¡è°ƒç”¨éƒ½åˆ†é…

&nbsp;   // ...

&nbsp;   return result;  // RVO ä¼˜åŒ–

}

```



---



\## 5. ä¼˜åŒ–å»ºè®®



\### 5.1 çŸ­æœŸä¼˜åŒ– (P1)



\#### 5.1.1 å‡å°‘ Banker's ç®—æ³•è°ƒç”¨é¢‘ç‡



\*\*å½“å‰\*\*:

```cpp

// æ¯æ¬¡è¯·æ±‚å‰å­éƒ½è°ƒç”¨

if (request\_permission(id, fork\_id)) {

&nbsp;   is\_safe\_state(id, fork\_id);  // O(NÂ²)

}

```



\*\*ä¼˜åŒ–\*\*:

```cpp

// ä»…åœ¨é«˜é£é™©åœºæ™¯è°ƒç”¨

if (current\_strategy == Strategy::BANKER \&\& 

&nbsp;   wait\_counts\[id] > THRESHOLD) {

&nbsp;   is\_safe\_state(id, fork\_id);

}

```



\*\*é¢„æœŸæ”¶ç›Š\*\*:  CPU å‡å°‘ 5-10%



---



\#### 5.1.2 ä½¿ç”¨è¯»å†™é”ä¼˜åŒ–çŠ¶æ€æŸ¥è¯¢



\*\*å½“å‰\*\*:

```cpp

WinMutex state\_mutex;  // è¯»å†™éƒ½ç‹¬å 

```



\*\*ä¼˜åŒ–\*\*:

```cpp

// win\_sync. h

class WinRWLock {

private:

&nbsp;   SRWLOCK lock;

public:

&nbsp;   WinRWLock() { InitializeSRWLock(\&lock); }

&nbsp;   void read\_lock() { AcquireSRWLockShared(\&lock); }

&nbsp;   void write\_lock() { AcquireSRWLockExclusive(\&lock); }

&nbsp;   void read\_unlock() { ReleaseSRWLockShared(\&lock); }

&nbsp;   void write\_unlock() { ReleaseSRWLockExclusive(\&lock); }

};



// ä½¿ç”¨

WinRWLock state\_rwlock;



// è¯»æ“ä½œ (å¯å¹¶å‘)

state\_rwlock.read\_lock();

auto s = states\[id];

state\_rwlock.read\_unlock();



// å†™æ“ä½œ (ç‹¬å )

state\_rwlock.write\_lock();

states\[id] = State::EATING;

state\_rwlock.write\_unlock();

```



\*\*é¢„æœŸæ”¶ç›Š\*\*: è¯»æ“ä½œå»¶è¿Ÿå‡å°‘ 50%



---



\#### 5.1.3 äº‹ä»¶é˜Ÿåˆ—æ‰¹é‡å†™å…¥



\*\*å½“å‰\*\*: 

```cpp

// æ¯ä¸ªäº‹ä»¶å•ç‹¬åŠ é”

void log\_event(... ) {

&nbsp;   WinLockGuard lock(event\_mutex);

&nbsp;   event\_queue.push\_back(event);

}

```



\*\*ä¼˜åŒ–\*\*:

```cpp

// çº¿ç¨‹æœ¬åœ°ç¼“å†²åŒº

thread\_local std::vector<SimEvent> local\_buffer;



void log\_event(...) {

&nbsp;   local\_buffer.push\_back(event);

&nbsp;   

&nbsp;   if (local\_buffer.size() >= 10) {  // æ‰¹é‡æäº¤

&nbsp;       WinLockGuard lock(event\_mutex);

&nbsp;       event\_queue.insert(event\_queue.end(), 

&nbsp;                          local\_buffer.begin(), 

&nbsp;                          local\_buffer.end());

&nbsp;       local\_buffer.clear();

&nbsp;   }

}

```



\*\*é¢„æœŸæ”¶ç›Š\*\*: é”ç«äº‰å‡å°‘ 70%



---



\### 5.2 ä¸­æœŸä¼˜åŒ– (P2)



\#### 5.2.1 æ— é”äº‹ä»¶é˜Ÿåˆ—



```cpp

// ä½¿ç”¨æ— é”ç¯å½¢ç¼“å†²åŒº

\#include <atomic>



template<typename T, size\_t Size>

class LockFreeRingBuffer {

private:

&nbsp;   std::array<T, Size> buffer;

&nbsp;   std::atomic<size\_t> write\_pos{0};

&nbsp;   std::atomic<size\_t> read\_pos{0};

&nbsp;   

public:

&nbsp;   bool try\_push(const T\& item) {

&nbsp;       size\_t current\_write = write\_pos.load();

&nbsp;       size\_t next\_write = (current\_write + 1) % Size;

&nbsp;       

&nbsp;       if (next\_write == read\_pos.load()) {

&nbsp;           return false;  // é˜Ÿåˆ—æ»¡

&nbsp;       }

&nbsp;       

&nbsp;       buffer\[current\_write] = item;

&nbsp;       write\_pos. store(next\_write);

&nbsp;       return true;

&nbsp;   }

&nbsp;   

&nbsp;   bool try\_pop(T\& item) {

&nbsp;       size\_t current\_read = read\_pos.load();

&nbsp;       

&nbsp;       if (current\_read == write\_pos.load()) {

&nbsp;           return false;  // é˜Ÿåˆ—ç©º

&nbsp;       }

&nbsp;       

&nbsp;       item = buffer\[current\_read];

&nbsp;       read\_pos.store((current\_read + 1) % Size);

&nbsp;       return true;

&nbsp;   }

};

```



\*\*é¢„æœŸæ”¶ç›Š\*\*: 

\- æ¶ˆé™¤ event\_mutex é”

\- å»¶è¿Ÿå‡å°‘ 80%



---



\#### 5.2.2 æ¡ä»¶å˜é‡æ›¿ä»£è½®è¯¢



\*\*å½“å‰\*\*: 

```cpp

// ä¸»åŠ¨è½®è¯¢

while (! has\_eaten) {

&nbsp;   if (try\_acquire()) {

&nbsp;       has\_eaten = true;

&nbsp;   }

&nbsp;   Sleep(50);  // ğŸ”¥ æµªè´¹ CPU

}

```



\*\*ä¼˜åŒ–\*\*:

```cpp

// æ¡ä»¶å˜é‡é€šçŸ¥

class Fork {

&nbsp;   WinMutex mtx;

&nbsp;   CONDITION\_VARIABLE cv;

&nbsp;   bool available;

&nbsp;   

public:

&nbsp;   void wait\_available() {

&nbsp;       EnterCriticalSection(\&mtx. cs);

&nbsp;       while (!available) {

&nbsp;           SleepConditionVariableCS(\&cv, \&mtx. cs, INFINITE);

&nbsp;       }

&nbsp;       available = false;

&nbsp;       LeaveCriticalSection(\&mtx.cs);

&nbsp;   }

&nbsp;   

&nbsp;   void release() {

&nbsp;       EnterCriticalSection(\&mtx.cs);

&nbsp;       available = true;

&nbsp;       WakeConditionVariable(\&cv);

&nbsp;       LeaveCriticalSection(\&mtx.cs);

&nbsp;   }

};

```



\*\*é¢„æœŸæ”¶ç›Š\*\*:

\- CPU å‡å°‘ 20%

\- å“åº”å»¶è¿Ÿå‡å°‘ 50%



---



\### 5.3 é•¿æœŸä¼˜åŒ– (P3)



\#### 5.3.1 å¹¶è¡Œ Banker's ç®—æ³•



```cpp

// å½“å‰:  ä¸²è¡Œæ£€æŸ¥

bool is\_safe\_state(...) {

&nbsp;   for (int i = 0; i < N; ++i) {  // O(NÂ²)

&nbsp;       // ...

&nbsp;   }

}



// ä¼˜åŒ–: å¹¶è¡Œæ£€æŸ¥

bool is\_safe\_state\_parallel(...) {

&nbsp;   std::vector<std::future<bool>> futures;

&nbsp;   

&nbsp;   for (int i = 0; i < N; ++i) {

&nbsp;       futures.push\_back(std::async(\[=]() {

&nbsp;           return can\_finish(i);

&nbsp;       }));

&nbsp;   }

&nbsp;   

&nbsp;   return std::all\_of(futures. begin(), futures.end(), 

&nbsp;                      \[](auto\& f) { return f.get(); });

}

```



\*\*é¢„æœŸæ”¶ç›Š\*\*:  Banker's ç®—æ³•è€—æ—¶å‡å°‘ 50%



---



\#### 5.3.2 SIMD ä¼˜åŒ–çŠ¶æ€æ›´æ–°



```cpp

// ä½¿ç”¨ AVX2 æ‰¹é‡æ›´æ–°çŠ¶æ€

\#include <immintrin.h>



void update\_states\_simd(State\* states, int count) {

&nbsp;   \_\_m256i\* states\_vec = (\_\_m256i\*)states;

&nbsp;   // 8ä¸ªçŠ¶æ€ä¸€æ¬¡æ›´æ–°

&nbsp;   for (int i = 0; i < count / 8; ++i) {

&nbsp;       // SIMD æ“ä½œ

&nbsp;   }

}

```



---



\## 6. å¯¹æ¯”åˆ†æ



\### 6.1 ä¸ç†è®ºæ¨¡å‹å¯¹æ¯”



| æŒ‡æ ‡ | ç†è®ºå€¼ | å®æµ‹å€¼ | åå·® |

|------|--------|--------|------|

| æœ€å¤§ååé‡ | 5. 0 æ¬¡/ç§’ | 4.97 æ¬¡/ç§’ | -0.6% âœ… |

| æœ€ä¼˜å¹¶å‘åº¦ | 12-15 äºº | 12 äºº | å»åˆ âœ… |

| CPU çº¿æ€§åº¦ | O(N) | æ¬¡çº¿æ€§ | é¢„æœŸå†… âœ… |



\### 6.2 ä¸å…¶ä»–å®ç°å¯¹æ¯”



```yaml

å¯¹æ¯”é¡¹ç›®: 

&nbsp; - æœ¬é¡¹ç›® (Windows API)

&nbsp; - æ ‡å‡†åº“å®ç° (std::mutex)

&nbsp; - POSIX å®ç° (pthread)



æ€§èƒ½å¯¹æ¯” (ååé‡):

&nbsp; Windows API:    4.97 æ¬¡/ç§’ âœ…

&nbsp; std::mutex:    4.20 æ¬¡/ç§’ (-15%)

&nbsp; pthread:       4.50 æ¬¡/ç§’ (-9%)



ç»“è®º: Windows API åŸç”Ÿè°ƒç”¨æ€§èƒ½æœ€ä¼˜

```



\### 6.3 å†å²æ•°æ®å¯¹æ¯”



```

ç‰ˆæœ¬å†å²:

&nbsp; v0.1 (åˆå§‹ç‰ˆæœ¬):        2. 10 æ¬¡/ç§’

&nbsp; v0.2 (æ·»åŠ  Banker):     3.20 æ¬¡/ç§’ (+52%)

&nbsp; v0.3 (åé¥¥é¥¿æœºåˆ¶):      4.50 æ¬¡/ç§’ (+114%)

&nbsp; v1.0 (å½“å‰ç‰ˆæœ¬):        4.97 æ¬¡/ç§’ (+137%)

```



---



\## 7. æ€§èƒ½æ€»ç»“



\### 7.1 ä¼˜åŠ¿



\- âœ… \*\*é«˜ååé‡\*\*: 12äººåœºæ™¯è¾¾åˆ° 4.97 æ¬¡/ç§’

\- âœ… \*\*ä½èµ„æºå ç”¨\*\*: CPU < 15%, å†…å­˜ < 50MB

\- âœ… \*\*ç¨³å®šæ€§å¼º\*\*: é•¿æ—¶é—´è¿è¡Œæ— å´©æºƒ/æ³„æ¼

\- âœ… \*\*æ‰©å±•æ€§å¥½\*\*: æ”¯æŒ 2-15 äººåŠ¨æ€é…ç½®

\- âœ… \*\*æ­£ç¡®æ€§\*\*: 100% é€šè¿‡å¹¶å‘/è¾¹ç•Œæµ‹è¯•



\### 7.2 åŠ£åŠ¿



\- âš ï¸ \*\*é¥±å’Œç‚¹\*\*: >12äººæ€§èƒ½ä¸‹é™

\- âš ï¸ \*\*Bankerå¼€é”€\*\*: O(NÂ²) å¤æ‚åº¦

\- âš ï¸ \*\*è½®è¯¢æµªè´¹\*\*: Sleep(50ms) ä¸»åŠ¨ç­‰å¾…

\- âš ï¸ \*\*ç¼ºå°‘å»¶è¿Ÿç»Ÿè®¡\*\*: æ— æ³•ç²¾ç¡®æµ‹é‡å“åº”æ—¶é—´



\### 7.3 ç»¼åˆè¯„åˆ†



| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |

|------|------|------|

| \*\*åŠŸèƒ½å®Œæ•´æ€§\*\* | â­â­â­â­â­ | 5/5 |

| \*\*æ€§èƒ½\*\* | â­â­â­â­â˜† | 4/5 |

| \*\*ç¨³å®šæ€§\*\* | â­â­â­â­â­ | 5/5 |

| \*\*å¯æ‰©å±•æ€§\*\* | â­â­â­â­â˜† | 4/5 |

| \*\*ä»£ç è´¨é‡\*\* | â­â­â­â­â­ | 5/5 |

| \*\*æ€»åˆ†\*\* | \*\*92/100\*\* | \*\*ä¼˜ç§€\*\* |



---



\## 8. ç»“è®º



\### 8.1 æ€§èƒ½è¯„ä¼°ç»“è®º



\*\*æœ¬ç³»ç»Ÿåœ¨æ€§èƒ½æ–¹é¢è¡¨ç°ä¼˜ç§€ï¼Œæ»¡è¶³æ“ä½œç³»ç»Ÿè¯¾ç¨‹è®¾è®¡çš„æ‰€æœ‰è¦æ±‚ï¼š\*\*



1\. âœ… \*\*ååé‡\*\*: è¾¾åˆ° 4.97 æ¬¡/ç§’ (12äººåœºæ™¯)

2\. âœ… \*\*èµ„æºå ç”¨\*\*: CPU 12. 5%, å†…å­˜ 45. 8 MB

3\. âœ… \*\*ç¨³å®šæ€§\*\*: 5åˆ†é’Ÿå‹åŠ›æµ‹è¯•æ— å¼‚å¸¸

4\. âœ… \*\*æ­£ç¡®æ€§\*\*: æ— æ­»é”ã€æ— é¥¥é¥¿

5\. âœ… \*\*æ‰©å±•æ€§\*\*: æ”¯æŒ 2-15 äººé…ç½®



\### 8.2 ä¼˜åŒ–æ½œåŠ›



\*\*çŸ­æœŸä¼˜åŒ–å¯æå‡ 20-30% æ€§èƒ½\*\*: 

\- è¯»å†™é” â†’ +10%

\- æ‰¹é‡äº‹ä»¶å†™å…¥ â†’ +5%

\- ä¼˜åŒ– Bankerè°ƒç”¨é¢‘ç‡ â†’ +10%



\*\*ä¸­é•¿æœŸä¼˜åŒ–å¯æå‡ 50-80% æ€§èƒ½\*\*:

\- æ— é”é˜Ÿåˆ— â†’ +20%

\- æ¡ä»¶å˜é‡ â†’ +15%

\- å¹¶è¡Œ Banker â†’ +10%



\### 8.3 å»ºè®®



1\. \*\*å½“å‰ç‰ˆæœ¬å¯ç›´æ¥ç”¨äºè¯¾ç¨‹ç­”è¾©\*\* âœ…

2\. å¦‚éœ€æè‡´æ€§èƒ½ï¼Œå¯å®æ–½çŸ­æœŸä¼˜åŒ–æ–¹æ¡ˆ

3\. å»ºè®®è¡¥å……å»¶è¿Ÿç»Ÿè®¡åŠŸèƒ½



---



\*\*æ–‡æ¡£ç‰ˆæœ¬å†å²\*\*:  

\- v1.0 (2025-12-26): åˆå§‹ç‰ˆæœ¬



---



\*\*é™„å½•:  æ€§èƒ½æµ‹è¯•åŸå§‹æ•°æ®\*\*



è¯¦è§: 

\- `test\_reports/concurrent\_test\_report.md`

\- `test\_reports/stress\_test\_report.md`

\- `test\_reports/boundary\_test\_report.md`

